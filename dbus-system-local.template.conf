<!DOCTYPE busconfig PUBLIC
 "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
 "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">

<busconfig>
  <!-- Our well-known bus type, don't change this -->
  <type>system</type>

  <!-- Run as the current user instead of messagebus -->
  <user>{{USERNAME}}</user>

  <!-- Fork into daemon mode -->
  <fork/>

  <!-- Use a custom socket path for development -->
  <listen>unix:path=/tmp/dbus-system-local/system_bus_socket</listen>

  <policy context="default">
    <!-- Allow everything for local development -->
    <allow own="*"/>
    <allow send_destination="*" send_interface="*"/>
    <allow send_requested_reply="true" send_type="method_return"/>
    <allow send_requested_reply="true" send_type="error"/>
    <allow send_type="signal"/>
    <allow receive_type="method_call"/>
    <allow receive_type="method_return"/>
    <allow receive_type="error"/>
    <allow receive_type="signal"/>
  </policy>

  <!-- Allow root to do anything -->
  <policy user="root">
    <allow own="*"/>
    <allow send_destination="*"/>
    <allow send_type="method_call"/>
    <allow send_type="method_return"/>
    <allow send_type="error"/>
    <allow send_type="signal"/>
    <allow receive_type="method_call"/>
    <allow receive_type="method_return"/>
    <allow receive_type="error"/>
    <allow receive_type="signal"/>
  </policy>

  <limit name="max_incoming_bytes">1000000000</limit>
  <limit name="max_outgoing_bytes">1000000000</limit>
  <limit name="max_message_size">1000000000</limit>
  <limit name="service_start_timeout">120000</limit>
  <limit name="auth_timeout">240000</limit>
  <limit name="max_completed_connections">2048</limit>
  <limit name="max_incomplete_connections">64</limit>
  <limit name="max_connections_per_user">256</limit>
  <limit name="max_pending_service_starts">512</limit>
  <limit name="max_names_per_connection">512</limit>
  <limit name="max_match_rules_per_connection">512</limit>
  <limit name="max_replies_per_connection">128</limit>
</busconfig>